package DemoInClass.DemoInClass1207;

public class HashTable {
    //å¯¹åº”PPTç¬¬äº”ç« å“ˆå¸Œè¡¨
    //æ•£åˆ—è¡¨çš„é¢˜ç›®å¤šçœ‹ğŸ“•
    //ä¹¦åæœ‰è¯¾åä¹ é¢˜
    //é‡ç‚¹æŒæ¡è§£å†³å†²çªçš„é—­æ•£åˆ—(çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹ã€åŒæ•£åˆ—)å’Œå¼€æ•£åˆ—æ–¹æ³•ï¼Œä¼šç®—æœç´¢æˆåŠŸçš„å¹³å‡æœç´¢é•¿åº¦
    int divisor;//æ•£åˆ—å‡½æ•°çš„é™¤æ•°
    int currentSize;//å½“å‰çš„æ¡¶æ•°
    int tableSize;//æœ€å¤§çš„æ¡¶æ•°
    int[] ht;//æ•£åˆ—è¡¨çš„å­˜å‚¨æ•°ç»„
    boolean[] info;//å­˜å‚¨æ¯ä¸ªæ¡¶çš„çŠ¶æ€ï¼Œfalseè¡¨ç¤ºæ¡¶ä¸ºç©º
    //æ³¨æ„ï¼Œè¿™é‡Œè¯´çš„æ¡¶å…¶å®å°±æ˜¯æ•°ç»„çš„æ¯ä¸€ä¸ªä½
    //æ„é€ å‡½æ•°
    public HashTable(int divisor,int size){
        this.divisor=divisor;
        this.tableSize=size;
        this.currentSize=0;
        ht=new int[tableSize];
        this.info=new boolean[tableSize];
    }
    //ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•çš„æœç´¢ç®—æ³•
    //å¦‚æœæœç´¢æˆåŠŸï¼Œè¿”å›è¯¥å…ƒç´ çš„ä½ç½®ï¼Œå¦‚æœæœç´¢ä¸æˆåŠŸï¼Œè¿”å›æ’å…¥ç‚¹
    public int LinearFindPos(int key){
        //è®¡ç®—åˆå§‹æ¡¶å·
        int i=key%divisor;
        int j=i;//jæ˜¯æ£€æµ‹ä¸‹ä¸€ç©ºæ¡¶çš„ä¸‹æ ‡
        do {
            if(!info[j] || info[j] && ht[j]==key){
                return j;
            }else {
                j=(j+1)%tableSize;
            }
        }while (j!=i);
        //å¾ªç¯é€€å‡ºçš„æ¡ä»¶æ˜¯j=iï¼Œæ­¤æ—¶è¡¨ç¤ºå·²ç»è½¬äº†ä¸€åœˆï¼Œç›¸å½“äºè¡¨å·²ç»æ»¡äº†ï¼Œæœç´¢å¤±è´¥
        return j;
    }
    //ä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•åœ¨æ•£åˆ—è¡¨ä¸­æœç´¢å…ƒç´ keyï¼Œå¦‚æœå­˜åœ¨ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false
    public boolean Search(int key){
        //ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ‰¾åˆ°å¯¹åº”çš„ä¸‹æ ‡
        int i=LinearFindPos(key);
        //å¦‚æœå½“å‰æ¡¶ä¸ç©ºä¸”å½“å‰æ¡¶çš„å…ƒç´ å°±æ˜¯key,è¡¨ç¤ºæŸ¥æ‰¾æˆåŠŸ
        return info[i] && ht[i] == key;
    }

    //æ•£åˆ—è¡¨çš„æ’å…¥

    /**
     * åœ¨æ•£åˆ—è¡¨ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ 
     * @param key å¾…æ’å…¥çš„å…³é”®ç 
     * @return ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æˆåŠŸæ’å…¥
     */
    public boolean Insert(int key){
        //æ‰¾åˆ°å¯èƒ½å¯ä»¥æ’å…¥çš„ä½ç½®
        int index=LinearFindPos(key);
        //å¯¹è¿™ä¸ªä½ç½®è¿›è¡Œè¿›ä¸€æ­¥åˆ¤æ–­ï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯å¯ä»¥çœŸæ­£æ’å…¥å…³é”®ç 
        //1.å¦‚æœè¿™ä¸ªä½ç½®çš„çŠ¶æ€æ˜¯ç©ºï¼Œç›´æ¥æ’å…¥
        if(!info[index]){
            ht[index]=key;
            info[index]=true;
            //ä¸è¦å¿˜è®°å°†currentSize+1
            currentSize++;
            return true;
        }
        //2.å¦‚æœè¿™ä¸ªä½ç½®å·²ç»æœ‰å…ƒç´ äº†ï¼Œå¹¶ä¸”è¿™ä¸ªå…ƒç´ å°±æ˜¯keyï¼Œä¸è¦æ’å…¥
        if(info[index] && ht[index]==key) {
            System.out.println("æ•£åˆ—è¡¨ä¸­å·²ç»æœ‰è¿™ä¸ªå…ƒç´ äº†ï¼Œä¸éœ€è¦æ’å…¥ï¼");
            return false;
        }
        System.out.println("æ•£åˆ—è¡¨å·²æ»¡ï¼Œæ’å…¥å¤±è´¥ï¼");
        return false;
    }

    /**
     * åœ¨æ•£åˆ—è¡¨ä¸­åˆ é™¤æŸä¸ªå…ƒç´ 
     * @param key å…³é”®ç 
     * @return æ˜¯å¦æˆåŠŸåˆ é™¤
     */
    public boolean Remove(int key){
        int i=LinearFindPos(key);
        //å¦‚æœæ‰¾åˆ°äº†key
        if(info[i] && ht[i]==key){
            info[i]=false;
            currentSize--;
            return true;
        }
        return false;
    }
    //æ³¨æ„æ•£åˆ—è¡¨é¢˜ç›®å¯èƒ½å›è®©æˆ‘ä»¬æ±‚è§£æœç´¢æˆåŠŸçš„å¹³å‡æœç´¢é•¿åº¦
    //å¯¹äºæ¯ä¸€ä¸ªå…ƒç´ çš„å¹³å‡æœç´¢é•¿åº¦ï¼Œå¯¹äºçº¿æ€§æ¢æµ‹æ³•ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…ƒç´ çš„æ¯”è¾ƒæ¬¡æ•°ä¸å½“åˆå°†å®ƒå­˜å…¥æ—¶çš„æ¢æµ‹æ¬¡æ•°ç›¸åŒ
    //ç®€å•çš„è¯´å°±æ˜¯è¦ä»ä¸€å¼€æ—¶å“ˆå¸Œçš„é‚£ä¸ªå“ˆå¸Œå€¼å¾€åæ‰¾å‡ æ¬¡æ‰èƒ½æ‰¾åˆ°

    //çº¿æ€§æ¢æµ‹æ³•çš„å †ç§¯é—®é¢˜
    //ä¸åŒçš„æ¢æµ‹åºåˆ—çš„å…³é”®ç å æ®äº†å¯åˆ©ç”¨çš„ç©ºæ¡¶ï¼Œæ‰¾å¯»æŸä¸€å…³é”®ç éœ€è¦ç»å†ä¸åŒçš„æ¢æµ‹åºåˆ—çš„å…ƒç´ 

    //ä¸‹é¢è€ƒè™‘ä½¿ç”¨äºŒæ¬¡æ¢æµ‹æ³•
    //è¿™è¾¹è¦æ³¨æ„ä¸€ä¸‹æ²¡æœ‰æ‰¾åˆ°æ—¶å‰ä¸€ä¸ªä½ç½®ä¸åä¸€ä¸ªä½ç½®çš„å…³ç³»
    //æ˜¯åŠ ä¸Š(2i-1)æˆ–è€…å‡å»(2i-1)
    public int QuadraticFindPos(int key){
        int index=key%divisor;//è®¡ç®—å‡ºåˆå§‹æ¡¶å·
        int k=0,odd=0,j;//kä¸ºæ¢æµ‹æ¬¡æ•°,oddæ˜¯æ§åˆ¶åŠ å‡æ ‡å¿—
        while(info[index] && ht[index]!=key){
            if(odd==0){
                k++;
                index=(index+2*k-1)%tableSize;
                odd=1;
            }else {
                index=(index-(2*k-1))%tableSize;
                odd=0;
                if(index<0){
                    index+=tableSize;
                }
            }
        }
        return index;
    }
    //äºŒæ¬¡æ¢æµ‹æ’å…¥åˆ é™¤æš‚æ—¶ä¸å†™

    //åŒæ•£åˆ—ç®—æ³•
    //å†…å®¹è§PPTå’ŒğŸ“•

    //å¤„ç†å†²çªçš„å¼€æ•£åˆ—ç®—æ³•
    //å…·ä½“æ€è·¯è§ğŸ“•å’ŒPPT
    //å¤§ä½“æ€è·¯å°±æ˜¯ä½¿ç”¨é“¾è¡¨æ¥å­˜å‚¨æ¯ä¸ªä½ç½®çš„å€¼


























}
